function p(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function r(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:p(a)}}var t="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,u="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
function v(a,b){if(b){var f=t;a=a.split(".");for(var e=0;e<a.length-1;e++){var h=a[e];h in f||(f[h]={});f=f[h]}a=a[a.length-1];e=f[a];b=b(e);b!=e&&null!=b&&u(f,a,{configurable:!0,writable:!0,value:b})}}
v("Promise",function(a){function b(c){this.l=0;this.v=void 0;this.f=[];var d=this.s();try{c(d.resolve,d.reject)}catch(g){d.reject(g)}}function f(){this.b=null}function e(c){return c instanceof b?c:new b(function(d){d(c)})}if(a)return a;f.prototype.w=function(c){if(null==this.b){this.b=[];var d=this;this.A(function(){d.L()})}this.b.push(c)};var h=t.setTimeout;f.prototype.A=function(c){h(c,0)};f.prototype.L=function(){for(;this.b&&this.b.length;){var c=this.b;this.b=[];for(var d=0;d<c.length;++d){var g=
c[d];c[d]=null;try{g()}catch(k){this.H(k)}}}this.b=null};f.prototype.H=function(c){this.A(function(){throw c;})};b.prototype.s=function(){function c(k){return function(m){g||(g=!0,k.call(d,m))}}var d=this,g=!1;return{resolve:c(this.R),reject:c(this.u)}};b.prototype.R=function(c){if(c===this)this.u(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof b)this.S(c);else{a:switch(typeof c){case "object":var d=null!=c;break a;case "function":d=!0;break a;default:d=!1}d?this.P(c):this.C(c)}};
b.prototype.P=function(c){var d=void 0;try{d=c.then}catch(g){this.u(g);return}"function"==typeof d?this.T(d,c):this.C(c)};b.prototype.u=function(c){this.D(2,c)};b.prototype.C=function(c){this.D(1,c)};b.prototype.D=function(c,d){if(0!=this.l)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.l);this.l=c;this.v=d;this.M()};b.prototype.M=function(){if(null!=this.f){for(var c=0;c<this.f.length;++c)l.w(this.f[c]);this.f=null}};var l=new f;b.prototype.S=function(c){var d=this.s();
c.o(d.resolve,d.reject)};b.prototype.T=function(c,d){var g=this.s();try{c.call(d,g.resolve,g.reject)}catch(k){g.reject(k)}};b.prototype.then=function(c,d){function g(n,q){return"function"==typeof n?function(w){try{k(n(w))}catch(x){m(x)}}:q}var k,m,y=new b(function(n,q){k=n;m=q});this.o(g(c,k),g(d,m));return y};b.prototype.catch=function(c){return this.then(void 0,c)};b.prototype.o=function(c,d){function g(){switch(k.l){case 1:c(k.v);break;case 2:d(k.v);break;default:throw Error("Unexpected state: "+
k.l);}}var k=this;null==this.f?l.w(g):this.f.push(g)};b.resolve=e;b.reject=function(c){return new b(function(d,g){g(c)})};b.race=function(c){return new b(function(d,g){for(var k=r(c),m=k.next();!m.done;m=k.next())e(m.value).o(d,g)})};b.all=function(c){var d=r(c),g=d.next();return g.done?e([]):new b(function(k,m){function y(w){return function(x){n[w]=x;q--;0==q&&k(n)}}var n=[],q=0;do n.push(void 0),q++,e(g.value).o(y(n.length-1),m),g=d.next();while(!g.done)})};return b});
function z(){z=function(){};t.Symbol||(t.Symbol=A)}function B(a,b){this.G=a;u(this,"description",{configurable:!0,writable:!0,value:b})}B.prototype.toString=function(){return this.G};var A=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new B("jscomp_symbol_"+(f||"")+"_"+b++,f)}var b=0;return a}();
function C(){z();var a=t.Symbol.iterator;a||(a=t.Symbol.iterator=t.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&u(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return D(p(this))}});C=function(){}}function D(a){C();a={next:a};a[t.Symbol.iterator]=function(){return this};return a}function E(){this.h=!1;this.c=null;this.F=void 0;this.i=1;this.B=this.J=0;this.g=null}function F(a){if(a.h)throw new TypeError("Generator is already running");a.h=!0}
E.prototype.j=function(a){this.F=a};E.prototype.m=function(a){this.g={K:a,N:!0};this.i=this.J||this.B};E.prototype.return=function(a){this.g={return:a};this.i=this.B};function G(a){this.a=new E;this.O=a}G.prototype.j=function(a){F(this.a);if(this.a.c)return H(this,this.a.c.next,a,this.a.j);this.a.j(a);return I(this)};function J(a,b){F(a.a);var f=a.a.c;if(f)return H(a,"return"in f?f["return"]:function(e){return{value:e,done:!0}},b,a.a.return);a.a.return(b);return I(a)}
G.prototype.m=function(a){F(this.a);if(this.a.c)return H(this,this.a.c["throw"],a,this.a.j);this.a.m(a);return I(this)};function H(a,b,f,e){try{var h=b.call(a.a.c,f);if(!(h instanceof Object))throw new TypeError("Iterator result "+h+" is not an object");if(!h.done)return a.a.h=!1,h;var l=h.value}catch(c){return a.a.c=null,a.a.m(c),I(a)}a.a.c=null;e.call(a.a,l);return I(a)}
function I(a){for(;a.a.i;)try{var b=a.O(a.a);if(b)return a.a.h=!1,{value:b.value,done:!1}}catch(f){a.a.F=void 0,a.a.m(f)}a.a.h=!1;if(a.a.g){b=a.a.g;a.a.g=null;if(b.N)throw b.K;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function K(a){this.next=function(b){return a.j(b)};this.throw=function(b){return a.m(b)};this.return=function(b){return J(a,b)};C();this[Symbol.iterator]=function(){return this}}
function L(a){function b(e){return a.next(e)}function f(e){return a.throw(e)}return new Promise(function(e,h){function l(c){c.done?e(c.value):Promise.resolve(c.value).then(b,f).then(l,h)}l(a.next())})}var M=this;
function N(){function a(b,f){this.state=a.NONE;this.link=document.createElement("a");b&&this.update(b,f)}a.prototype.update=function(b,f){var e=this;return L(new K(new G(function(h){e.link.download=f||"download";e.state=a.PROGRESSING;return h.return(fetch(b).then(function(l){return l.blob()}).then(function(l){e.state=a.READY;e.blob=l;e.I=URL.createObjectURL(l);e.link.href=e.I}).catch(function(l){e.state=a.ERROR;console.error(l)}))})))};a.prototype.download=function(b){b&&(this.link.download=b);this.state===
a.READY?this.link.click():console.error("The file hasn't been ready.");return this};a.download=function(b,f){var e;return L(new K(new G(function(h){if(1==h.i){e=a.instance;var l=e.update(b);h.i=2;return{value:l}}return h.return(e.download(f))})))};a.READY=1;a.NONE=0;a.ERROR=-1;a.PROGRESSING=2;a.instance=new a;return a}"object"===typeof exports&&"undefined"!==typeof module?module.V=N():"function"===typeof define&&define.U?define(N):(M=M||self,M.BlobDownloader=N());
